{{- $url := .Site.Params.cveFeedBucket -}}
{{- with try (resources.GetRemote $url) -}}
  {{- if .Err -}}
    {{- $message := printf "Failed to retrieve CVE data: %s" .Err -}}
    {{- if eq hugo.Environment "production" -}}
      {{- errorf $message -}}
    {{- else -}}
      {{- warnf $message -}}
    {{- end -}}
  {{- else -}}
    {{- .Value.Content | transform.Unmarshal | jsonify -}}
  {{- end -}}
{{- else -}}
  {{- $message := printf "Unable to fetch CVE data from the specified URL: %q" $url -}}
  {{- if eq hugo.Environment "production" -}}
    {{- errorf $message -}}
  {{- else -}}
    {{- warnf $message -}}
  {{- end -}}
{{- end -}}
