{{ $_hugo_config := `{ "version": 1 }` }}
{{ $col_id := .Get "color" | default .Ordinal }}
{{ $height := .Get "height" | default "auto"  }}
{{ $type   := .Get "type" | default "" }}
{{ $bg     := .Get "background-image" }}
{{ $id := .Get "id" | default (printf "td-block-%d-section" .Ordinal ) }}
{{/* Image background based on Docsy's blocks/cover shortcode */}}
{{ if $bg }}
{{ template "shortcodes-blocks_getimage" (dict "name" $bg "ctx" . "target" "bg") }}
{{ end }}
{{ $image := $.Scratch.Get "bg" }}
{{ with $image }}
<style>
#{{ $id }} {
  background-image: url({{ .Permalink }});
}
</style>
{{ end }}
<a id="td-block-{{ .Ordinal }}" class="td-offset-anchor"></a>
<section id="{{ $id }}" class="row td-box td-box--{{ $col_id }} td-box--gradient td-box--height-{{ $height }}">
	<div class="col">
		<div class="row {{ $type }}">
			{{ if eq .Page.File.Ext "md" }}
				{{ .Inner | markdownify }}
			{{ else }}
				{{ .Inner | htmlUnescape | safeHTML }}
			{{ end }}
		</div>
	</div>
</section>
