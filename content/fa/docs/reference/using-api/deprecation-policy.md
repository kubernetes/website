---
reviewers:
- bgrant0607
- lavalamp
- thockin
title: Kubernetes Deprecation Policy
content_type: concept
weight: 40
---

<!-- overview -->
این سند جزئیات سیاست حذف را برای جنبه‌های مختلف سیستم شرح می‌دهد.

<!-- body -->
کوبرنتیز یک سیستم بزرگ با اجزای زیاد و مشارکت‌کنندگان فراوان است. مانند هر نرم‌افزار دیگری از این دست، مجموعه ویژگی‌ها به طور طبیعی با گذشت زمان تکامل می‌یابد و گاهی اوقات ممکن است نیاز به حذف یک ویژگی باشد. این می‌تواند شامل یک API، یک پرچم یا حتی کل یک ویژگی باشد. برای جلوگیری از ایجاد مشکل برای کاربران فعلی، کوبرنتیز از یک سیاست منسوخ‌سازی برای جنبه‌هایی از سیستم که قرار است حذف شوند، پیروی می‌کند.

## Deprecating parts of the API

از آنجایی که Kubernetes یک سیستم مبتنی بر API است، API آن در طول زمان تکامل یافته تا منعکس کننده درک در حال تکامل از فضای مشکل باشد. API Kubernetes در واقع مجموعه‌ای از APIها است که "گروه‌های API" نامیده می‌شوند و هر گروه API به طور مستقل نسخه‌بندی می‌شود. [API versions](/docs/reference/using-api/#api-versioning) در 3 مسیر اصلی قرار می‌گیرند که هر کدام سیاست‌های متفاوتی برای منسوخ شدن دارند:

| Example  | Track                            |
|----------|----------------------------------|
| v1       | GA (generally available, stable) |
| v1beta1  | Beta (pre-release)               |
| v1alpha1 | Alpha (experimental)             |

یک نسخه مشخص از Kubernetes می‌تواند از هر تعداد گروه API و هر تعداد نسخه از هر کدام پشتیبانی کند.


قوانین زیر، منسوخ شدن عناصر API را تعیین می‌کنند. این موارد شامل موارد زیر است:

* منابع REST (معروف به اشیاء API)
* زمینه‌های منابع REST
* حاشیه‌نویسی‌ها روی منابع REST، شامل حاشیه‌نویسی‌های «بتا» اما نه
 شامل حاشیه‌نویسی‌های «آلفا».
* مقادیر شمارشی یا ثابت
* ساختارهای پیکربندی کامپوننت

این قوانین بین انتشارهای رسمی اعمال می‌شوند، نه بین کامیت‌های دلخواه برای شاخه‌های اصلی یا انتشار.

**قانون شماره ۱: عناصر API فقط با افزایش نسخه گروه API قابل حذف هستند.**



{{< note >}}
وقتی یک عنصر API به یک گروه API در یک نسخه خاص اضافه می‌شود، صرف نظر از مسیر، نمی‌توان آن را از آن نسخه حذف کرد یا رفتار آن را به طور قابل توجهی تغییر داد.
به دلایل تاریخی، دو گروه API «یکپارچه» وجود دارد - «هسته» (بدون نام گروه) و "extensions". منابع به تدریج از این گروه‌های API قدیمی به گروه‌های API مختص دامنه منتقل خواهند شد.
{{< /note >}}

**قانون شماره ۲: اشیاء API باید بتوانند در یک نسخه مشخص، بدون از دست دادن اطلاعات، بین نسخه‌های API رفت و برگشت داشته باشند، به استثنای کل منابع REST که در برخی نسخه‌ها وجود ندارند.**

برای مثال، یک شیء می‌تواند به صورت v1 نوشته شود و سپس به صورت v2 خوانده شود و به v1 تبدیل شود، و منبع v1 حاصل با منبع اصلی یکسان خواهد بود. نمایش در v2 ممکن است با v1 متفاوت باشد، اما سیستم می‌داند که چگونه بین آنها در هر دو جهت تبدیل کند. علاوه بر این، هر فیلد جدیدی که در v2 اضافه می‌شود باید بتواند به v1 رفت و برگشت کند، به این معنی که v1 ممکن است مجبور شود یک فیلد معادل اضافه کند یا آن را به عنوان یک حاشیه‌نویسی نمایش دهد.

**Rule #3: An API version in a given track may not be deprecated in favor of a less stable API version.**

* نسخه‌های API GA می‌توانند جایگزین نسخه‌های بتا و آلفا API شوند.
* نسخه‌های API بتا می‌توانند جایگزین نسخه‌های بتا و آلفا API قبلی شوند، اما *ممکن است* جایگزین نسخه‌های API GA نشوند.
* نسخه‌های API آلفا می‌توانند جایگزین نسخه‌های آلفا API قبلی شوند، اما *ممکن است* جایگزین نسخه‌های GA یا بتا API نشوند.

**Rule #4a: API lifetime is determined by the API stability level**

* نسخه‌های API GA ممکن است به عنوان منسوخ علامت‌گذاری شوند، اما نباید در نسخه اصلی Kubernetes حذف شوند.
* نسخه‌های API بتا حداکثر ۹ ماه یا ۳ نسخه فرعی پس از معرفی (هر کدام که طولانی‌تر باشد) منسوخ می‌شوند،
و دیگر ۹ ماه یا ۳ نسخه فرعی پس از منسوخ شدن (هر کدام که طولانی‌تر باشد) ارائه نمی‌شوند.
* نسخه‌های API آلفا ممکن است در هر نسخه‌ای بدون اطلاع قبلی در مورد منسوخ شدن حذف شوند.

این تضمین می‌کند که پشتیبانی از API بتا، [حداکثر انحراف نسخه پشتیبانی‌شده از ۲ نسخه](/releases/version-skew-policy/) را پوشش می‌دهد، و APIها در نسخه‌های بتای ناپایدار راکد نمی‌مانند و استفاده از محصول را انباشته نمی‌کنند که با پایان پشتیبانی از API بتا مختل خواهد شد.

{{< note >}}
در حال حاضر هیچ برنامه‌ای برای نسخه اصلی Kubernetes که APIهای GA را حذف کند، وجود ندارد.
{{< /note >}}

{{< note >}}
تا زمانی که مشکل [#52185](https://github.com/kubernetes/kubernetes/issues/52185) حل نشود، هیچ نسخه‌ای از API که در فضای ذخیره‌سازی ذخیره شده است، قابل حذف نیست. ارائه نقاط پایانی REST برای آن نسخه‌ها ممکن است غیرفعال شود (با توجه به جدول زمانی منسوخ شدن در این سند)، اما سرور API باید قادر به رمزگشایی/تبدیل داده‌های ذخیره شده قبلی از فضای ذخیره‌سازی باشد.
{{< /note >}}

**قانون شماره ۴ب: نسخه API «ترجیحی» و «نسخه ذخیره‌سازی» برای یک گروه خاص ممکن است تا زمانی که نسخه‌ای منتشر نشده باشد که هم از نسخه جدید و هم از نسخه قبلی پشتیبانی کند، ارتقا نیابند.**

کاربران باید بتوانند به نسخه جدید Kubernetes ارتقا دهند و سپس بدون تبدیل چیزی به نسخه جدید API یا بروز هرگونه مشکل (مگر اینکه صریحاً از ویژگی‌هایی که فقط در نسخه جدیدتر موجود است استفاده کرده باشند) به نسخه قبلی بازگردند. این امر به ویژه در نمایش ذخیره شده اشیاء مشهود است.

همه این موارد به بهترین شکل با مثال نشان داده می‌شود. یک نسخه Kubernetes، نسخه X، را تصور کنید که یک گروه API جدید را معرفی می‌کند. تقریباً هر ۴ ماه (۳ ماه در سال) یک نسخه جدید Kubernetes منتشر می‌شود. جدول زیر شرح می‌دهد که کدام نسخه‌های API در یک سری از نسخه‌های بعدی پشتیبانی می‌شوند.

<table>
  <thead>
    <tr>
      <th>Release</th>
      <th>API Versions</th>
      <th>Preferred/Storage Version</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>X</td>
      <td>v1alpha1</td>
      <td>v1alpha1</td>
      <td></td>
    </tr>
    <tr>
      <td>X+1</td>
      <td>v1alpha2</td>
      <td>v1alpha2</td>
      <td>
        <ul>
           <li>v1alpha1 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+2</td>
      <td>v1beta1</td>
      <td>v1beta1</td>
      <td>
        <ul>
          <li>v1alpha2 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+3</td>
      <td>v1beta2, v1beta1 (deprecated)</td>
      <td>v1beta1</td>
      <td>
        <ul>
          <li>v1beta1 is deprecated. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+4</td>
      <td>v1beta2, v1beta1 (deprecated)</td>
      <td>v1beta2</td>
      <td></td>
    </tr>
    <tr>
      <td>X+5</td>
      <td>v1, v1beta1 (deprecated), v1beta2 (deprecated)</td>
      <td>v1beta2</td>
      <td>
        <ul>
          <li>v1beta2 is deprecated. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+6</td>
      <td>v1, v1beta2 (deprecated)</td>
      <td>v1</td>
      <td>
        <ul>
          <li>v1beta1 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+7</td>
      <td>v1, v1beta2 (deprecated)</td>
      <td>v1</td>
      <td></td>
    </tr>
    <tr>
      <td>X+8</td>
      <td>v2alpha1, v1</td>
      <td>v1</td>
      <td>
        <ul>
          <li>v1beta2 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+9</td>
      <td>v2alpha2, v1</td>
      <td>v1</td>
      <td>
        <ul>
           <li>v2alpha1 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+10</td>
      <td>v2beta1, v1</td>
      <td>v1</td>
      <td>
        <ul>
          <li>v2alpha2 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+11</td>
      <td>v2beta2, v2beta1 (deprecated), v1</td>
      <td>v1</td>
      <td>
        <ul>
          <li>v2beta1 is deprecated. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+12</td>
      <td>v2, v2beta2 (deprecated), v2beta1 (deprecated), v1 (deprecated)</td>
      <td>v1</td>
      <td>
        <ul>
          <li>v2beta2 is deprecated. See release notes for required actions.</li>
          <li>v1 is deprecated in favor of v2, but will not be removed</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+13</td>
      <td>v2, v2beta1 (deprecated), v2beta2 (deprecated), v1 (deprecated)</td>
      <td>v2</td>
      <td></td>
    </tr>
    <tr>
      <td>X+14</td>
      <td>v2, v2beta2 (deprecated), v1 (deprecated)</td>
      <td>v2</td>
      <td>
        <ul>
          <li>v2beta1 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>X+15</td>
      <td>v2, v1 (deprecated)</td>
      <td>v2</td>
      <td>
        <ul>
          <li>v2beta2 is removed. See release notes for required actions.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

### REST resources (aka API objects)


یک منبع فرضی REST به نام Widget را در نظر بگیرید که در جدول زمانی بالا در API نسخه ۱ وجود داشته و باید منسوخ شود. ما منسوخ شدن را همزمان با انتشار X+1 مستند و اعلام می‌کنیم [announce](https://groups.google.com/forum/#!forum/kubernetes-announce). منبع Widget هنوز در API نسخه ۱ (منسوخ شده) وجود دارد اما در نسخه ۲alpha1 وجود ندارد. منبع Widget همچنان در نسخه‌های تا X+۸ و از جمله آن وجود دارد و کار می‌کند. تنها در نسخه X+۹، زمانی که API نسخه ۱ منسوخ شده است، منبع Widget از بین می‌رود و رفتار آن حذف می‌شود.


با شروع از Kubernetes نسخه ۱.۱۹، ارسال یک درخواست API به یک نقطه پایانی REST API منسوخ شده:

1. یک هدر `Warning` (مطابق تعریف‌شده در [RFC7234، بخش 5.5](https://tools.ietf.org/html/rfc7234#section-5.5)) در پاسخ API برمی‌گرداند.
1. یک حاشیه‌نویسی `"k8s.io/deprecated":"true"` به رویداد [audit](/docs/tasks/debug/debug-cluster/audit/) ثبت‌شده برای درخواست اضافه می‌کند.
1. معیار سنجش `apiserver_requested_deprecated_apis` را در فرآیند `kube-apiserver` روی `1` تنظیم می‌کند. این معیار دارای برچسب‌هایی برای `group`، `version`، `resource`، `subresource` است که می‌توانند به معیار `apiserver_request_total` ملحق شوند، و یک برچسب `removed_release` که نشان دهنده نسخه Kubernetes است که در آن API دیگر ارائه نخواهد شد. پرس و جوی Prometheus زیر اطلاعاتی در مورد درخواست‌های ارسال شده به APIهای منسوخ شده که در نسخه ۱.۲۲ حذف خواهند شد، برمی‌گرداند:

   ```promql
   apiserver_requested_deprecated_apis{removed_release="1.22"} * on(group,version,resource,subresource) group_right() apiserver_request_total
   ```

### زمینه‌های منابع REST

همانند کل منابع REST، یک فیلد منفرد که در API نسخه ۱ وجود داشت، باید تا زمانی که API نسخه ۱ حذف شود، وجود داشته باشد و کار کند. برخلاف کل منابع، APIهای نسخه ۲ می‌توانند نمایش متفاوتی برای فیلد انتخاب کنند، البته تا زمانی که بتوان آن را به صورت رفت و برگشتی نمایش داد. به عنوان مثال، یک فیلد نسخه ۱ با نام "magnitude" که منسوخ شده بود، ممکن است در API نسخه ۲ با نام "deprecatedMagnitude" نامگذاری شود. هنگامی که v1 در نهایت حذف شود، فیلد منسوخ شده می‌تواند از نسخه ۲ حذف شود.

### مقادیر شمارشی یا ثابت

همانند کل منابع REST و فیلدهای وابسته به آن، یک مقدار ثابت که در API نسخه ۱ پشتیبانی می‌شد، باید وجود داشته باشد و تا زمان حذف API نسخه ۱ عمل کند.

### ساختارهای پیکربندی کامپوننت

پیکربندی‌های کامپوننت مشابه منابع REST نسخه‌بندی و مدیریت می‌شوند.

### کار آینده

با گذشت زمان، کوبرنتیز نسخه‌های API دقیق‌تری را معرفی خواهد کرد که در آن زمان این قوانین در صورت نیاز تنظیم می‌شوند.

## Deprecating a flag or CLI

سیستم Kubernetes از چندین برنامه مختلف تشکیل شده است که با هم همکاری می‌کنند.
گاهی اوقات، یک نسخه Kubernetes ممکن است پرچم‌ها یا دستورات CLI (در مجموع "عناصر CLI") را در این برنامه‌ها حذف کند. برنامه‌های منفرد
به طور طبیعی به دو گروه اصلی تقسیم می‌شوند - برنامه‌های کاربرپسند و مدیرپسند، که در سیاست‌های منسوخ شدن آنها کمی متفاوت است. مگر اینکه یک پرچم به صراحت
با پیشوند "آلفا" یا "بتا" ذکر شده یا مستند شده باشد، به عنوان GA در نظر گرفته می‌شود.

عناصر CLI عملاً بخشی از API سیستم هستند، اما از آنجایی که به روش REST API نسخه‌بندی نمی‌شوند، قوانین منسوخ شدن آنها به شرح زیر است:

**قانون شماره ۵a: عناصر رابط خط فرمان 
(CLI) کامپوننت‌های کاربرپسند (مثلاً kubectl) باید پس از انقضای اعلام‌شده‌شان، حداقل به مدت زیر عمل کنند:**

* **GA: 12 months or 2 releases (whichever is longer)**
* **Beta: 3 months or 1 release (whichever is longer)**
* **Alpha: 0 releases**

**قانون شماره ۵ب:
 عناصر رابط خط فرمان (CLI) کامپوننت‌های مربوط به ادمین (مثلاً kubelet) باید پس از انقضای اعلام‌شده‌شان، حداقل به مدت زیر عمل کنند:**

* **GA: ۶ ماه یا ۱ بار انتشار (هر کدام که طولانی‌تر باشد)**
* **بتا: ۳ ماه یا ۱ نسخه (هر کدام که طولانی‌تر باشد)**
* **آلفا: ۰ نسخه منتشر شده**



**قانون شماره ۵c: عناصر رابط خط فرمان (CLI) 
را نمی‌توان به نفع عناصر CLI با پایداری کمتر، منسوخ کرد**

مشابه قانون شماره ۳ برای APIها، اگر عنصری از رابط خط فرمان با یک پیاده‌سازی جایگزین جایگزین شود، مانند تغییر نام یک عنصر موجود، یا با تغییر به استفاده از پیکربندی منبع گرفته شده از یک فایل به جای یک آرگومان خط فرمان، آن جایگزین پیشنهادی باید از سطح پایداری یکسان یا بالاتری برخوردار باشد.

**قانون شماره ۶: عناصر CLI منسوخ‌شده باید هنگام استفاده هشدارهایی (به صورت اختیاری غیرفعال)
 منتشر کنند.**

## منسوخ کردن یک ویژگی یا رفتار

گاهی اوقات، یک نسخه از Kubernetes نیاز به منسوخ کردن برخی از ویژگی‌ها یا رفتارهای سیستم دارد که توسط API یا CLI کنترل نمی‌شوند. در این حالت، قوانین منسوخ کردن به شرح زیر است:
**قانون شماره ۷: رفتارهای منسوخ‌شده باید حداقل ۱ سال پس از اعلام منسوخ‌شدنشان،
 همچنان فعال باشند.**

اگر ویژگی یا رفتار با یک پیاده‌سازی جایگزین جایگزین می‌شود که برای تطبیق با تغییر نیاز به کار دارد، باید تا حد امکان تلاش شود تا این انتقال ساده شود. اگر پیاده‌سازی جایگزین تحت کنترل سازمان Kubernetes باشد، قوانین زیر اعمال می‌شود:

**قانون شماره ۸: ویژگی رفتاری نباید به نفع پیاده‌سازی جایگزین که پایداری کمتری دارد، کنار گذاشته شود*

برای مثال، یک ویژگی که به‌طور عمومی در دسترس است را نمی‌توان به نفع یک جایگزین بتا کنار گذاشت.
با این حال، پروژه Kubernetes کاربران را تشویق می‌کند که پیاده‌سازی‌های جایگزین را حتی قبل از رسیدن به همان سطح بلوغ، بپذیرند و به آن‌ها منتقل شوند. این امر به‌ویژه برای بررسی موارد استفاده جدید یک ویژگی یا دریافت بازخورد اولیه در مورد جایگزین، مهم است.

پیاده‌سازی‌های جایگزین گاهی اوقات ممکن است ابزارها یا محصولات خارجی باشند، برای مثال، یک ویژگی ممکن است از kubelet به container runtime منتقل شود که تحت کنترل پروژه Kubernetes نیست. در چنین مواردی، نمی‌توان این قانون را اعمال کرد، اما باید تلاشی برای اطمینان از وجود یک مسیر انتقال وجود داشته باشد که سطوح بلوغ اجزا را به خطر نیندازد. در مثال مربوط به container runtime، این تلاش ممکن است شامل تلاش برای اطمینان از این باشد که container runtime های محبوب، نسخه‌هایی داشته باشند که در حین پیاده‌سازی آن رفتار جایگزین، همان سطح پایداری را ارائه دهند..

قوانین منسوخ‌شده برای ویژگی‌ها و رفتارها به این معنی نیست که همه تغییرات در سیستم تابع این خط‌مشی هستند. این قوانین فقط در مورد رفتارهای قابل توجه و قابل مشاهده توسط کاربر اعمال می‌شوند که بر صحت برنامه‌های در حال اجرا در Kubernetes یا بر مدیریت خوشه‌های Kubernetes تأثیر می‌گذارند و به طور کامل حذف می‌شوند.

یک استثنا برای قانون فوق، _دروازه‌های ویژگی_ است. دروازه‌های ویژگی، جفت‌های کلید=مقدار هستند که به کاربران امکان می‌دهند ویژگی‌های آزمایشی را فعال/غیرفعال کنند.

دروازه‌های ویژگی برای پوشش چرخه عمر توسعه یک ویژگی در نظر گرفته شده‌اند - آنها به عنوان API های بلندمدت در نظر گرفته نشده‌اند. به همین ترتیب، انتظار می‌رود که پس از تبدیل شدن یک ویژگی به GA یا حذف آن، منسوخ شده و حذف شوند.

با عبور یک ویژگی از مراحل، گیت ویژگی مرتبط با آن تکامل می‌یابد.
چرخه عمر ویژگی مطابق با گیت ویژگی مربوطه به صورت زیر است:

* آلفا: دروازه ویژگی به طور پیش‌فرض غیرفعال است و می‌تواند توسط کاربر فعال شود.
* بتا: دروازه ویژگی به طور پیش‌فرض فعال است و می‌تواند توسط کاربر غیرفعال شود.
* GA: دروازه ویژگی منسوخ شده است (به ["انحراف"](#انحراف) مراجعه کنید) و غیرعملیاتی می‌شود.
* GA، پنجره منسوخ شدن کامل: دروازه ویژگی حذف شده و فراخوانی‌های آن دیگر پذیرفته نمی‌شوند.

### Deprecation

ویژگی‌ها می‌توانند در هر نقطه‌ای از چرخه حیات قبل از GA حذف شوند. وقتی ویژگی‌ها قبل از GA حذف می‌شوند، دروازه‌های ویژگی مرتبط با آنها نیز منسوخ می‌شوند.

هنگامی که یک فراخوانی سعی می‌کند یک دروازه ویژگی غیرعملیاتی را غیرفعال کند، فراخوانی با شکست مواجه می‌شود تا از سناریوهای پشتیبانی نشده‌ای که در غیر این صورت ممکن است به صورت خاموش اجرا شوند، جلوگیری شود.

در برخی موارد، حذف ویژگی‌های پیش از GA به زمان قابل توجهی نیاز دارد. دروازه‌های ویژگی می‌توانند تا زمانی که ویژگی مرتبط با آنها به طور کامل حذف شود، عملیاتی باقی بمانند، که در آن نقطه خود دروازه ویژگی می‌تواند منسوخ شود..

وقتی حذف یک دروازه ویژگی برای یک ویژگی GA نیز به زمان قابل توجهی نیاز دارد، فراخوانی دروازه‌های ویژگی ممکن است در صورتی که دروازه ویژگی هیچ تاثیری بر ویژگی نداشته باشد و اگر دروازه ویژگی هیچ خطایی ایجاد نکند، همچنان عملیاتی باقی بمانند.

ویژگی‌هایی که قرار است توسط کاربران غیرفعال شوند، باید شامل مکانیزمی برای غیرفعال کردن ویژگی در گیت ویژگی مرتبط باشند.

نسخه‌بندی برای درگاه‌های ویژگی با اجزایی که قبلاً مورد بحث قرار گرفتند متفاوت است، بنابراین قوانین منسوخ شدن به شرح زیر است:

**قانون شماره ۹: گیت‌های ویژگی باید زمانی منسوخ شوند که ویژگی مربوطه که کنترل می‌کنند
 یک مرحله از چرخه عمر را به شرح زیر تغییر دهد. گیت‌های ویژگی نباید کمتر از:** عمل کنند.

* **ویژگی بتا برای GA: ۶ ماه یا ۲ انتشار (هر کدام که طولانی‌تر باشد)**
* **تاریخ انقضای نسخه بتا: ۳ ماه یا ۱ انتشار (هر کدام که طولانی‌تر باشد)**
* **ویژگی آلفا تا پایان انتشار: 0 نسخه**

**قانون شماره ۱۰: گیت‌های ویژگی منسوخ‌شده باید هنگام استفاده با یک هشدار پاسخ دهند. هنگامی که یک گیت ویژگی منسوخ می‌شود، باید هم در یادداشت‌های انتشار و هم در راهنمای CLI مربوطه مستند شود.
هم هشدارها و هم مستندات باید نشان دهند که آیا یک گیت ویژگی غیرفعال است یا خیر.**

## Deprecating a metric

هر جزء از صفحه کنترل Kubernetes معیارهایی (معمولاً نقطه پایانی `/metrics`) را در معرض نمایش قرار می‌دهد که معمولاً توسط مدیران خوشه استفاده می‌شوند.
همه معیارها یکسان نیستند: برخی از معیارها معمولاً به عنوان SLI یا برای تعیین SLO استفاده می‌شوند، که معمولاً اهمیت بیشتری دارند. سایر معیارها ماهیت تجربی‌تری دارند یا در درجه اول در فرآیند توسعه Kubernetes استفاده می‌شوند.

بر این اساس، معیارها در سه کلاس پایداری (`ALPHA`، `BETA` `STABLE`) قرار می‌گیرند.
این امر بر حذف یک معیار در طول انتشار Kubernetes تأثیر می‌گذارد. این کلاس‌ها
با توجه به اهمیت درک شده از معیار تعیین می‌شوند. قوانین برای
حذف و حذف یک معیار به شرح زیر است:

**قانون شماره ۱۱a: معیارها، برای کلاس پایداری مربوطه، باید حداقل برای موارد زیر عمل کنند:**

* **پایدار: ۴ انتشار یا ۱۲ ماه (هر کدام که طولانی‌تر باشد)**
* **بتا: ۲ انتشار یا ۸ ماه (هر کدام که طولانی‌تر باشد)**
* **آلفا: ۰ انتشار**

**قانون شماره ۱۱ب: معیارها، پس از _اعلام منسوخ شدن_ خود، باید حداقل برای مدت زیر کار کنند:**

* **پایدار: ۳ انتشار یا ۹ ماه (هر کدام که طولانی‌تر باشد)**
* **بتا: ۱ انتشار یا ۴ ماه (هر کدام که طولانی‌تر باشد)**
* **آلفا: ۰ انتشار**
معیارهای منسوخ‌شده، متن توضیحات خود را با پیشوند رشته‌ی اعلان منسوخ‌شده '(منسوخ‌شده از x.y)' خواهند داشت و در طول ثبت معیار، یک گزارش هشدار منتشر می‌شود. معیارهای منسوخ‌شده، مانند همتایان پایدار و منسوخ‌نشده‌ی خود، به‌طور خودکار در نقطه‌ی پایانی معیارها ثبت می‌شوند و بنابراین قابل مشاهده هستند.

در نسخه بعدی (زمانی که `deprecatedVersion` متریک برابر با `_current_kubernetes_version - 3` باشد)، یک متریک منسوخ شده به یک متریک `hidden_` تبدیل می‌شود.
**_برخلاف همتایان منسوخ شده‌شان، متریک‌های پنهان دیگر به طور خودکار در نقطه پایانی متریک‌ها ثبت نمی‌شوند (از این رو پنهان می‌شوند). با این حال، می‌توان آنها را به صراحت از طریق یک پرچم خط فرمان روی فایل باینری فعال کرد. (`--show-hidden-metrics-for-version=`). این به مدیران خوشه یک دریچه فرار می‌دهد تا در صورت عدم توانایی در واکنش به هشدارهای منسوخ قبلی، به درستی از یک متریک منسوخ شده مهاجرت کنند. متریک‌های پنهان باید پس از یک نسخه حذف شوند.

## استثنائات

هیچ سیاستی نمی‌تواند تمام موقعیت‌های ممکن را پوشش دهد. این سیاست یک سند زنده است و با گذشت زمان تکامل می‌یابد. در عمل، موقعیت‌هایی وجود خواهد داشت که به طور کامل در این سیاست نمی‌گنجند، یا این سیاست برای آنها به یک مانع جدی تبدیل می‌شود. چنین موقعیت‌هایی باید با SIGها و رهبران پروژه مورد بحث قرار گیرد تا بهترین راه‌حل‌ها برای آن موارد خاص پیدا شود، و همیشه در نظر داشته باشید که Kubernetes متعهد به ایجاد یک سیستم پایدار است که تا حد امکان، هرگز کاربران را از کار نمی‌اندازد. موارد استثنا همیشه در تمام یادداشت‌های انتشار مربوطه اعلام خواهد شد.
