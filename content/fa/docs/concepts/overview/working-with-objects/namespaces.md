---
reviewers:
- xirehat
title: فضاهای نام
api_metadata:
- apiVersion: "v1"
  kind: "Namespace"
content_type: concept
weight: 45
---

<!-- overview -->

در کوبرنتیز، _namespace_‌ها مکانیزمی برای جداسازی گروهی از منابع درون یک خوشه فراهم می‌کنند.  
نام منابع باید در داخل یک فضای نام یکتا باشد، اما نیازی نیست در کل خوشه یکتا باشد.  
محدوده‌بندی بر پایه فضای نام فقط برای اشیای دارای فضای نام کاربرد دارد  
_(مانند Deploymentها، Serviceها و غیره)_ و برای اشیای سراسری خوشه  
_(مانند StorageClass، Nodeها، PersistentVolumeها و ...)‌_ صدق نمی‌کند.

<!-- body -->

## چه زمانی از چند فضای نام استفاده کنیم؟

فضای نام برای محیط‌هایی طراحی شده‌اند که کاربران زیادی در تیم‌ها یا پروژه‌های مختلف فعالیت دارند.  
در خوشه‌هایی که تنها چند کاربر تا چند ده کاربر دارند، معمولاً نیازی به ایجاد فضای نام یا فکر کردن به آن‌ها ندارید.  
زمانی از فضای نام استفاده کنید که به قابلیت‌هایی که فراهم می‌کنند نیاز دارید.

فضای نام یک محدوده برای نام‌ها ایجاد می‌کنند.  
نام منابع باید در داخل یک فضای نام یکتا باشد، اما نیازی نیست در تمام فضای نام یکتا باشد.  
فضای نام را نمی‌توان درون هم تو در تو کرد و هر منبع کوبرنتیز تنها می‌تواند در یک فضای نام باشد.

فضای نام راهی برای تقسیم منابع خوشه بین چند کاربر هستند  
(از طریق [سهمیه منابع](/docs/concepts/policy/resource-quotas/)).

برای جدا کردن منابعی که فقط کمی با هم تفاوت دارند—مثلاً نسخه‌های مختلف یک نرم‌افزار—  
لازم نیست از فضای نام جداگانه استفاده کنید؛ در عوض از  
{{< glossary_tooltip text="برچسب" term_id="label" >}}‌ برای متمایز کردن منابع در همان فضای نام استفاده کنید.

{{< note >}}
برای یک خوشه تولیدی، توصیه می‌شود از فضای نام پیش‌فرض (`default`) استفاده نکنید.  
در عوض، فضای نام جدید بسازید و از آن‌ها استفاده کنید.
{{< /note >}}

## فضای نام‌های اولیه

کوبرنتیز با چهار فضای نام اولیه آغاز به کار می‌کند:

`default`  
: کوبرنتیز این فضای نام را به‌صورت پیش‌فرض در اختیار می‌گذارد تا بتوانید بلافاصله از خوشه جدید خود استفاده کنید، بدون آن‌که ابتدا نیاز به ایجاد یک فضای نام داشته باشید.

`kube-node-lease`  
: این فضای نام شامل اشیای [Lease](/docs/concepts/architecture/leases/) مرتبط با هر نود است.  
اجاره‌نامه‌های نود به kubelet اجازه می‌دهند [heartbeat](/docs/concepts/architecture/nodes/#node-heartbeats) ارسال کند  
تا control plane بتواند خرابی نود را تشخیص دهد.

`kube-public`  
: این فضای نام توسط *تمامی* کلاینت‌ها (از جمله کلاینت‌های غیرمعتبرشده) قابل خواندن است.  
این فضای نام عمدتاً برای استفاده داخلی خوشه رزرو شده، در صورتی که منابعی باید به‌صورت عمومی در کل خوشه قابل مشاهده و خواندن باشند.  
جنبه عمومی بودن این فضای نام صرفاً یک قرارداد است، نه یک الزام.

`kube-system`  
: این فضای نام مخصوص اشیایی است که توسط سیستم کوبرنتیز ایجاد می‌شوند.

## کار با فضاهای نام

ایجاد و حذف فضاهای نام در  
[مستندات راهنمای مدیریت برای فضاهای نام](/docs/tasks/administer-cluster/namespaces) توضیح داده شده است.

{{< note >}}
از ایجاد فضاهای نام با پیشوند `kube-` خودداری کنید،  
زیرا این پیشوند برای فضاهای نام سیستمی کوبرنتیز رزرو شده است.
{{< /note >}}

### مشاهده فضاهای نام

برای فهرست‌کردن فضاهای نام فعلی در یک خوشه می‌توانید از دستور زیر استفاده کنید:

```shell
kubectl get namespace
```
```
NAME              STATUS   AGE
default           Active   1d
kube-node-lease   Active   1d
kube-public       Active   1d
kube-system       Active   1d
```


### تنظیم فضای نام برای یک درخواست

برای تنظیم فضای نام برای یک درخواست جاری، از فلگ `--namespace` استفاده کنید.

برای مثال:

```shell
kubectl run nginx --image=nginx --namespace=<insert-namespace-name-here>
kubectl get pods --namespace=<insert-namespace-name-here>
```

### تنظیم اولویت فضای نام

شما می‌توانید فضای نام را برای تمام دستورات بعدی kubectl در آن زمینه به طور دائم ذخیره کنید.

```shell
kubectl config set-context --current --namespace=<insert-namespace-name-here>
# Validate it
kubectl config view --minify | grep namespace:
```

## فضاهای نام و DNS

هنگامی که یک [Service](/docs/concepts/services-networking/service/) ایجاد می‌کنید،  
یک [ورودی DNS](/docs/concepts/services-networking/dns-pod-service/) متناظر با آن ساخته می‌شود.  
این ورودی به شکل `<service-name>.<namespace-name>.svc.cluster.local` است.  
یعنی اگر یک کانتینر فقط از `<service-name>` استفاده کند، به سرویسی که در فضای نام محلی قرار دارد ارجاع داده می‌شود.  
این ویژگی زمانی مفید است که بخواهید از همان پیکربندی در چند فضای نام مانند توسعه (Development)، آزمایشی (Staging) و تولید (Production) استفاده کنید.  
اگر بخواهید از یک فضای نام به فضای نام دیگر دسترسی داشته باشید، باید از نام دامنه کامل (FQDN) استفاده کنید.

در نتیجه، تمام نام‌های فضای نام باید  
[برچسب‌های معتبر RFC 1123 DNS](/docs/concepts/overview/working-with-objects/names/#dns-label-names) باشند.

{{< warning >}}
اگر فضاهای نامی با همان نام [دامنه‌های سطح‌بالای عمومی (TLD)](https://data.iana.org/TLD/tlds-alpha-by-domain.txt) ایجاد شوند،  
سرویس‌های درون این فضاهای نام می‌توانند نام‌های کوتاه DNS داشته باشند که با رکوردهای DNS عمومی تداخل پیدا می‌کنند.  
اگر بار کاری (Workload) از هر فضای نامی یک جستجوی DNS بدون [نقطه پایانی](https://datatracker.ietf.org/doc/html/rfc1034#page-8) انجام دهد،  
به آن سرویس‌ها ارجاع داده می‌شود و نسبت به DNS عمومی اولویت خواهد داشت.

برای جلوگیری از این مسئله، دسترسی برای ایجاد فضاهای نام را به کاربران مورد اعتماد محدود کنید.  
در صورت نیاز، می‌توانید کنترل‌های امنیتی شخص ثالث مانند  
[Admission Webhookها](/docs/reference/access-authn-authz/extensible-admission-controllers/)  
را پیکربندی کنید تا از ایجاد هر فضای نام با نام یکی از [TLDهای عمومی](https://data.iana.org/TLD/tlds-alpha-by-domain.txt) جلوگیری شود.
{{< /warning >}}

## همه اشیاء در یک فضای نام قرار ندارند

بیشتر منابع کوبرنتیز (مانند پادها، سرویس‌ها، کنترلرهای تکرار و غیره) در یک فضای نام قرار دارند.  
اما خود منابع فضای نام، در فضای نام دیگری قرار ندارند.  
همچنین منابع سطح پایین مانند  
[nodes](/docs/concepts/architecture/nodes/) و  
[persistentVolumes](/docs/concepts/storage/persistent-volumes/)  
در هیچ فضای نامی قرار ندارند.

برای مشاهده اینکه کدام منابع کوبرنتیز در یک فضای نام هستند و کدام نیستند:

```shell
# In a namespace
kubectl api-resources --namespaced=true

# Not in a namespace
kubectl api-resources --namespaced=false
```

## برچسب‌گذاری خودکار

{{< feature-state for_k8s_version="1.22" state="stable" >}}

سطح کنترل کوبرنتیز یک {{< glossary_tooltip text="برچسب" term_id="label" >}} تغییرناپذیر  
با کلید `kubernetes.io/metadata.name` روی تمام فضاهای نام تنظیم می‌کند.  
مقدار این برچسب، نام فضای نام است.

## {{% heading "whatsnext" %}}

* درباره [ایجاد یک فضای نام جدید](/docs/tasks/administer-cluster/namespaces/#creating-a-new-namespace) بیشتر بیاموزید.  
* درباره [حذف یک فضای نام](/docs/tasks/administer-cluster/namespaces/#deleting-a-namespace) بیشتر مطالعه کنید.

