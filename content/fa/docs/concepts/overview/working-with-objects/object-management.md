---
title: مدیریت اشیاء کوبرنتیز
content_type: concept
weight: 20
---

<!-- overview -->
ابزار خط فرمان `kubectl` از چندین روش مختلف برای ایجاد و مدیریت  
{{< glossary_tooltip text="اشیاء" term_id="object" >}} کوبرنتیز پشتیبانی می‌کند.  
این سند نمای کلی‌ای از این روش‌های مختلف ارائه می‌دهد.  
برای جزئیات بیشتر درباره مدیریت اشیاء با استفاده از Kubectl، به [کتاب Kubectl](https://kubectl.docs.kubernetes.io) مراجعه کنید.

<!-- body -->

## تکنیک‌های مدیریت

{{< warning >}}
یک شیء در کوبرنتیز باید تنها با یک روش مدیریت شود. ترکیب چند روش برای یک شیء واحد می‌تواند منجر به رفتار نامشخص شود.
{{< /warning >}}

| Management technique             | Operates on          |Recommended environment | Supported writers  | Learning curve |
|----------------------------------|----------------------|------------------------|--------------------|----------------|
| Imperative commands              | Live objects         | Development projects   | 1+                 | Lowest         |
| Imperative object configuration  | Individual files     | Production projects    | 1                  | Moderate       |
| Declarative object configuration | Directories of files | Production projects    | 1+                 | Highest        |

## دستورات امری (Imperative)

در روش استفاده از دستورات امری، کاربر به‌صورت مستقیم روی اشیای زنده در خوشه عمل می‌کند.  
کاربر عملیات مورد نظر را به‌عنوان آرگومان یا فلگ به دستور `kubectl` ارائه می‌دهد.

این روش برای شروع کار یا انجام یک وظیفه موقتی در خوشه توصیه می‌شود.  
از آنجا که این تکنیک به‌طور مستقیم روی اشیای زنده عمل می‌کند، سابقه‌ای از پیکربندی‌های قبلی نگهداری نمی‌کند.

### مثال‌ها

اجرای یک نمونه از کانتینر nginx با ایجاد یک شیء Deployment:

```sh
kubectl create deployment nginx --image nginx
```

### ملاحظات (مزایا و معایب)

مزایا نسبت به پیکربندی شیء:

- دستورات با یک کلمه عملیاتی ساده بیان می‌شوند.
- دستورات تنها با یک مرحله تغییرات را در خوشه اعمال می‌کنند.

معایب نسبت به پیکربندی شیء:

- دستورات با فرایندهای بررسی تغییرات یکپارچه نیستند.
- دستورات سابقه‌ای از تغییرات برای حسابرسی ارائه نمی‌دهند.
- دستورات هیچ منبعی از سوابق به‌جز وضعیت فعلی شیء فراهم نمی‌کنند.
- دستورات الگو (template)‌ای برای ایجاد اشیای جدید در اختیار نمی‌گذارند.

## پیکربندی امری شیء

در پیکربندی امری شیء، دستور `kubectl` نوع عملیات (مانند create، replace و غیره)، فلگ‌های اختیاری و حداقل یک نام فایل را مشخص می‌کند.  
فایل مشخص‌شده باید شامل تعریف کامل شیء به فرمت YAML یا JSON باشد.

برای اطلاعات بیشتر درباره تعریف اشیاء به [مرجع API](/docs/reference/generated/kubernetes-api/{{< param "version" >}}/) مراجعه کنید.

{{< warning >}}
دستور `replace` در روش امری، مشخصات موجود (spec) را با نمونه جدید جایگزین می‌کند  
و هر تغییری که در فایل پیکربندی نیامده باشد از بین می‌برد.  
این روش نباید برای انواع منابعی که مشخصات آن‌ها به‌صورت مستقل از فایل پیکربندی به‌روزرسانی می‌شود استفاده شود.  
برای مثال، سرویس‌هایی از نوع `LoadBalancer` ممکن است فیلد `externalIPs` آن‌ها توسط خوشه  
به‌صورت مستقل از فایل پیکربندی به‌روزرسانی شود.
{{< /warning >}}

### مثال‌ها

اشیاء تعریف شده در یک فایل پیکربندی را ایجاد کنید:

```sh
kubectl create -f nginx.yaml
```

اشیاء تعریف شده در دو فایل پیکربندی را حذف کنید:

```sh
kubectl delete -f nginx.yaml -f redis.yaml
```

اشیاء تعریف شده در یک فایل پیکربندی را با بازنویسی پیکربندی زنده به‌روزرسانی کنید:

```sh
kubectl replace -f nginx.yaml
```

### ملاحظات (مزایا و معایب)

مزایا نسبت به دستورات امری:

- پیکربندی شیء را می‌توان در سیستم‌های کنترل نسخه مانند Git ذخیره کرد.  
- پیکربندی شیء می‌تواند با فرایندهایی مانند بررسی تغییرات پیش از ارسال (push) و مسیرهای حسابرسی یکپارچه شود.  
- پیکربندی شیء الگو (template)‌ای برای ایجاد اشیای جدید فراهم می‌کند.

معایب نسبت به دستورات امری:

- پیکربندی شیء نیازمند درک ابتدایی از ساختار (schema) شیء است.  
- پیکربندی شیء نیاز به گام اضافی نوشتن فایل YAML دارد.

مزایا نسبت به پیکربندی اعلانی شیء:

- رفتار پیکربندی امری شیء ساده‌تر و قابل درک‌تر است.  
- از نسخه 1.5 کوبرنتیز، پیکربندی امری شیء پایداری بیشتری داشته است.

معایب نسبت به پیکربندی اعلانی شیء:

- پیکربندی امری شیء بیشتر برای فایل‌ها مناسب است، نه دایرکتوری‌ها.  
- به‌روزرسانی‌هایی که روی اشیای زنده اعمال می‌شوند، باید در فایل‌های پیکربندی نیز منعکس شوند؛  
  در غیر این صورت، در جایگزینی بعدی از بین خواهند رفت.

## پیکربندی اعلانی شیء

در روش پیکربندی اعلانی شیء، کاربر روی فایل‌های پیکربندی اشیاء که به‌صورت محلی ذخیره شده‌اند کار می‌کند،  
اما عملیات مورد نظر (ایجاد، به‌روزرسانی، حذف) را به‌طور مستقیم مشخص نمی‌کند.  
دستور `kubectl` به‌صورت خودکار بر اساس هر شیء، عملیات ایجاد، به‌روزرسانی یا حذف را تشخیص می‌دهد.  
این روش امکان کار با دایرکتوری‌ها را فراهم می‌کند، جایی که ممکن است عملیات مختلفی روی اشیاء مختلف نیاز باشد.

{{< note >}}
پیکربندی اعلانی شیء تغییراتی را که توسط نویسندگان دیگر ایجاد شده‌اند حفظ می‌کند،  
حتی اگر این تغییرات به فایل پیکربندی بازگردانده نشده باشند.  
این کار با استفاده از عملیات API به نام `patch` ممکن می‌شود  
که فقط تفاوت‌های مشاهده‌شده را می‌نویسد، به‌جای آنکه کل پیکربندی شیء را با `replace` جایگزین کند.
{{< /note >}}

### مثال‌ها

تمام فایل‌های پیکربندی شیء در دایرکتوری `configs` را پردازش کرده و اشیای زنده را ایجاد یا patch کنید.  
می‌توانید ابتدا با استفاده از `diff` تغییراتی که قرار است اعمال شوند را مشاهده کرده و سپس اجرا کنید:

```sh
kubectl diff -f configs/
kubectl apply -f configs/
```

پردازش بازگشتی پوشه‌ها:

```sh
kubectl diff -R -f configs/
kubectl apply -R -f configs/
```

### ملاحظات (مزایا و معایب)

مزایا نسبت به پیکربندی امری شیء:

- تغییراتی که مستقیماً روی اشیای زنده اعمال می‌شوند حفظ می‌گردند، حتی اگر این تغییرات به فایل‌های پیکربندی بازگردانده نشوند.
- پیکربندی اعلانی شیء پشتیبانی بهتری برای کار با دایرکتوری‌ها دارد و به‌طور خودکار نوع عملیات (ایجاد، patch، حذف) را برای هر شیء تشخیص می‌دهد.

معایب نسبت به پیکربندی امری شیء:

- پیکربندی اعلانی شیء در شرایطی که نتیجه‌ها غیرمنتظره باشند، دشوارتر برای اشکال‌زدایی و درک است.
- به‌روزرسانی‌های جزئی با استفاده از diff، عملیات merge و patch پیچیده‌تری ایجاد می‌کنند.

## {{% heading "whatsnext" %}}

- [مدیریت اشیای کوبرنتیز با استفاده از دستورات امری](/docs/tasks/manage-kubernetes-objects/imperative-command/)
- [مدیریت امری اشیای کوبرنتیز با استفاده از فایل‌های پیکربندی](/docs/tasks/manage-kubernetes-objects/imperative-config/)
- [مدیریت اعلانی اشیای کوبرنتیز با استفاده از فایل‌های پیکربندی](/docs/tasks/manage-kubernetes-objects/declarative-config/)
- [مدیریت اعلانی اشیای کوبرنتیز با استفاده از Kustomize](/docs/tasks/manage-kubernetes-objects/kustomization/)
- [مرجع دستورات Kubectl](/docs/reference/generated/kubectl/kubectl-commands/)
- [کتاب Kubectl](https://kubectl.docs.kubernetes.io)
- [مرجع API کوبرنتیز](/docs/reference/generated/kubernetes-api/{{< param "version" >}}/)

