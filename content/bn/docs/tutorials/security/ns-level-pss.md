---
title: ржирзЗржорж╕рзНржкрзЗрж╕ рж╕рзНрждрж░рзЗ ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзБржи
content_type: tutorial
weight: 20
---

{{% alert title="ржирзЛржЯ" %}}
ржПржЗ ржЯрж┐ржЙржЯрзЛрж░рж┐ржпрж╝рж╛рж▓ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирждрзБржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ ржЬржирзНржп ржкрзНрж░ржпрзЛржЬрзНржпред
{{% /alert %}}

**Pod Security Admission** рж╣рж▓ ржПржХржЯрж┐ ржЕрзНржпрж╛ржбржорж┐рж╢ржи ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░ ржпрж╛ ржкржб рждрзИрж░рж┐ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ 
[Pod Security Standards](https://kubernetes.io/docs/concepts/security/pod-security-standards/) 
ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗред ржПржЯрж┐ Kubernetes v1.25-ржП GA (General Availability) рж╣ржпрж╝рзЗржЫрзЗред
ржПржЗ ржЯрж┐ржЙржЯрзЛрж░рж┐ржпрж╝рж╛рж▓рзЗ, ржЖржкржирж┐ `baseline` ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░ржмрзЗржиред

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ рж╕рзНрждрж░рзЗ ржПржХрж╛ржзрж┐ржХ ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржПржХрж╕рж╛ржерзЗ ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ ржжрзЗржЦрзБржи:
[Apply Pod Security Standards at the cluster level](https://kubernetes.io/docs/tutorials/security/cluster-level-pss/)ред

## {{% heading "ржкрзВрж░рзНржмрж╢рж░рзНржд" %}}

ржЖржкржирж╛рж░ ржУржпрж╝рж╛рж░рзНржХрж╕рзНржЯрзЗрж╢ржирзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржЯрзБрж▓ржЧрзБрж▓рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи:

- [kind](https://kind.sigs.k8s.io/docs/user/quick-start/#installation)
- [kubectl](https://kubernetes.io/docs/tasks/tools/)

## ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи

1. ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржб ржжрж┐ржпрж╝рзЗ ржПржХржЯрж┐ `kind` ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи:

   ```shell
   kind create cluster --name psa-ns-level
   ```

   ржЖржЙржЯржкрзБржЯ рж╣ржмрзЗ ржПрж░ржХржо:

   ```
   Creating cluster "psa-ns-level" ...
    тЬУ Ensuring node image (kindest/node:v1.25.0) ЁЯЦ╝
    тЬУ Preparing nodes ЁЯУж
    тЬУ Writing configuration ЁЯУЬ
    тЬУ Starting control-plane ЁЯХ╣я╕П
    тЬУ Installing CNI ЁЯФМ
    тЬУ Installing StorageClass ЁЯТ╛
   Set kubectl context to "kind-psa-ns-level"
   You can now use your cluster with:

   kubectl cluster-info --context kind-psa-ns-level

   Not sure what to do next? ЁЯШЕ  Check out https://kind.sigs.k8s.io/docs/user/quick-start/
   ```

2. ржирждрзБржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗ `kubectl` ржХржиржЯрзЗржХрзНрж╕ржЯ рж╕рзЗржЯ ржХрж░рзБржи:

   ```shell
   kubectl cluster-info --context kind-psa-ns-level
   ```

   ржЖржЙржЯржкрзБржЯ рж╣ржмрзЗ ржПрж░ржХржо:

   ```
   Kubernetes control plane is running at https://127.0.0.1:50996
   CoreDNS is running at https://127.0.0.1:50996/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

   To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
   ```

## ржПржХржЯрж┐ ржирзЗржорж╕рзНржкрзЗрж╕ рждрзИрж░рж┐ ржХрж░рзБржи

`example` ржирж╛ржорзЗ ржПржХржЯрж┐ ржирждрзБржи ржирзЗржорж╕рзНржкрзЗрж╕ рждрзИрж░рж┐ ржХрж░рзБржи:

```shell
kubectl create ns example
```

ржЖржЙржЯржкрзБржЯ рж╣ржмрзЗ:

```
namespace/example created
```

## рж╕рзЗржЗ ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рзБржи

1. ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржб ржжрж┐ржпрж╝рзЗ `example` ржирзЗржорж╕рзНржкрзЗрж╕рзЗ `baseline` ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб `warn` ржорзЛржбрзЗ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзБржи:

   ```shell
   kubectl label --overwrite ns example \
     pod-security.kubernetes.io/warn=baseline \
     pod-security.kubernetes.io/warn-version=latest
   ```

2. ржПржХржЗ ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржПржХрж╛ржзрж┐ржХ ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржЪрзЗржХ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ `baseline` рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб `enforce` ржорзЛржбрзЗ ржПржмржВ `restricted` рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб `warn` ржУ `audit` ржорзЛржбрзЗ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗ:

   ```shell
   kubectl label --overwrite ns example \
     pod-security.kubernetes.io/enforce=baseline \
     pod-security.kubernetes.io/enforce-version=latest \
     pod-security.kubernetes.io/warn=restricted \
     pod-security.kubernetes.io/warn-version=latest \
     pod-security.kubernetes.io/audit=restricted \
     pod-security.kubernetes.io/audit-version=latest
   ```

## ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржкрзНрж░ржпрж╝рзЛржЧ ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи

1. `example` ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржПржХржЯрж┐ `baseline` ржкржб рждрзИрж░рж┐ ржХрж░рзБржи:

   ```shell
   kubectl apply -n example -f https://k8s.io/examples/security/example-baseline-pod.yaml
   ```

   ржкржбржЯрж┐ рждрзИрж░рж┐ рж╣ржмрзЗ, рждржмрзЗ ржПржХржЯрж┐ рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛ рж╕рж╣ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк:

   ```
   Warning: would violate PodSecurity "restricted:latest": allowPrivilegeEscalation != false ...
   pod/nginx created
   ```

2. `default` ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржПржХржЗ ржкржб рждрзИрж░рж┐ ржХрж░рзБржи:

   ```shell
   kubectl apply -n default -f https://k8s.io/examples/security/example-baseline-pod.yaml
   ```

   ржЖржЙржЯржкрзБржЯ рж╣ржмрзЗ:

   ```
   pod/nginx created
   ```

`example` ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, рждрж╛ржЗ рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред ржХрж┐ржирзНрждрзБ `default` ржирзЗржорж╕рзНржкрзЗрж╕рзЗ ржХрзЛржи рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛ ржЫрж╛ржбрж╝рж╛ржЗ ржкржбржЯрж┐ рждрзИрж░рж┐ рж╣ржпрж╝рзЗржЫрзЗред

## ржХрзНрж▓рж┐ржи ржЖржк

ржЙржкрж░рзЗрж░ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ржЯрж┐ ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржб ржЪрж╛рж▓рж╛ржи:

```shell
kind delete cluster --name psa-ns-level
```

## {{% heading "ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржк" %}}

- ржПржХржЯрж┐ [рж╢рзЗрж▓ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ](https://kubernetes.io/examples/security/kind-with-namespace-level-baseline-pod-security.sh) ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржЙржкрж░рзЗрж░ рж╕ржм ржзрж╛ржк ржПржХрж╕рж╛ржерзЗ рж╕ржорзНржкржирзНржи ржХрж░рзБржи:

  1. kind ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ рждрзИрж░рж┐
  2. ржирждрзБржи ржирзЗржорж╕рзНржкрзЗрж╕ рждрзИрж░рж┐
  3. `baseline` ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб `enforce` ржорзЛржбрзЗ ржПржмржВ `restricted` ржкржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб `warn` ржУ `audit` ржорзЛржбрзЗ ржкрзНрж░ржпрж╝рзЛржЧ
  4. ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб рж╕рж╣ ржПржХржЯрж┐ ржкржб рждрзИрж░рж┐

- [Pod Security Admission](https://kubernetes.io/docs/concepts/security/pod-security-admission/)
- [Pod Security Standards](https://kubernetes.io/docs/concepts/security/pod-security-standards/)
- [Apply Pod Security Standards at the cluster level](https://kubernetes.io/docs/tutorials/security/cluster-level-pss/)
