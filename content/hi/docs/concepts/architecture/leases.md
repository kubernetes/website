---
title: पट्टों
content_type: concept
weight: 30
---

<!-- overview -->

वितरित प्रणालियों को अक्सर पट्टों की आवश्यकता होती है, जो साझा संसाधनों को लॉक करने और एक सेट के सदस्यों के बीच गतिविधि को समन्वयित करने के लिए एक तंत्र प्रदान करते हैं।
कुबेरनेट्स में, पट्टे की अवधारणा को [लीज](/docs/reference/kubernetes-api/cluster-resources/lease-v1/) द्वारा दर्शाया गया है।
`coordination.k8s.io` में ऑब्जेक्ट्स {{< glosary_tooltip text="API Group" term_id="api-group" >}},
जिनका उपयोग सिस्टम-महत्वपूर्ण क्षमताओं जैसे नोड हर्टबीट और घटक-स्तरीय नेता चुनाव के लिए किया जाता है।

<!-- body -->

## नोड दिल की धड़कन {#नोड दिल की धड़कन}

कुबेरनेट्स कुबेरनेट्स एपीआई सर्वर के लिए क्यूबलेट नोड दिल की धड़कन को संप्रेषित करने के लिए कुबेरनेट्स लीज एपीआई का उपयोग करता है।
प्रत्येक 'नोड' के लिए, 'क्यूब-नोड-लीज' में मेल खाने वाले नाम के साथ एक 'लीज' ऑब्जेक्ट होता है
नाम स्थान। हुड के तहत, प्रत्येक क्यूबलेट दिल की धड़कन इस `लीज` ऑब्जेक्ट के लिए एक **अपडेट** अनुरोध है, अपडेट हो रहा है
पट्टे के लिए `spec.renewTime` फ़ील्ड। कुबेरनेट्स नियंत्रण विमान इस क्षेत्र के टाइम स्टैम्प का उपयोग करता है
इस 'नोड' की उपलब्धता निर्धारित करने के लिए।

अधिक जानकारी के लिए [नोड लीज ऑब्जेक्ट्स](/docs/concepts/architecture/nodes/#heartbeats) देखें।

## नेता चुनाव

कुबेरनेट्स लीज का उपयोग यह सुनिश्चित करने के लिए भी करता है कि किसी भी समय एक घटक का केवल एक उदाहरण चल रहा है।
इसका उपयोग कंट्रोल प्लेन घटकों जैसे `क्यूब-कंट्रोलर-मैनेजर` और `क्यूब-शेड्यूलर` में किया जाता है
हा कॉन्फ़िगरेशन, जहां घटक का केवल एक उदाहरण सक्रिय रूप से चलना चाहिए जबकि दूसरा
उदाहरण स्टैंड-बाय पर हैं।

## एपीआई सर्वर पहचान

{{< feature-state for_k8s_version="v1.26" state="beta" >}}

कुबेरनेट्स v1.26 से शुरू होकर, प्रत्येक `क्यूब-एपिसर्वर` अपनी पहचान को प्रकाशित करने के लिए लीज एपीआई का उपयोग करता है।
बाकी प्रणाली। जबकि अपने आप में विशेष रूप से उपयोगी नहीं है, यह ग्राहकों के लिए एक तंत्र प्रदान करता है
पता लगाएँ कि `क्यूब-एपीसर्वर` के कितने उदाहरण कुबेरनेट्स नियंत्रण विमान का संचालन कर रहे हैं।
क्यूब-एपिसर्वर लीज़ का अस्तित्व भविष्य की क्षमताओं को सक्षम बनाता है जिनके बीच समन्वय की आवश्यकता हो सकती है
प्रत्येक क्यूब-एपीसर्वर।

आप `क्यूब-सिस्टम` नेमस्पेस में लीज ऑब्जेक्ट्स की जांच करके प्रत्येक क्यूब-एपीसर्वर के स्वामित्व वाले पट्टों का निरीक्षण कर सकते हैं
`क्यूब-एपीसर्वर-<sha256-हैश>` नाम से। वैकल्पिक रूप से आप लेबल चयनकर्ता `k8s.io/component=kube-apiserver` का उपयोग कर सकते हैं:

```shell
kubectl -n kube-system get lease -l k8s.io/component=kube-apiserver
```
```
NAME                                        HOLDER                                                                           AGE
kube-apiserver-c4vwjftbvpc5os2vvzle4qg27a   kube-apiserver-c4vwjftbvpc5os2vvzle4qg27a_9cbf54e5-1136-44bd-8f9a-1dcd15c346b4   5m33s
kube-apiserver-dz2dqprdpsgnm756t5rnov7yka   kube-apiserver-dz2dqprdpsgnm756t5rnov7yka_84f2a85d-37c1-4b14-b6b9-603e62e4896f   4m23s
kube-apiserver-fyloo45sdenffw2ugwaz3likua   kube-apiserver-fyloo45sdenffw2ugwaz3likua_c5ffa286-8a9a-45d4-91e7-61118ed58d2e   4m43s
```

पट्टे के नाम में प्रयुक्त SHA256 हैश OS होस्टनाम पर आधारित है जैसा कि उस API सर्वर द्वारा देखा गया है। प्रत्येक क्यूब-एपीसर्वर होना चाहिए
एक होस्टनाम का उपयोग करने के लिए कॉन्फ़िगर किया गया है जो क्लस्टर के भीतर अद्वितीय है। क्यूब-एपीसर्वर के नए उदाहरण जो एक ही होस्टनाम का उपयोग करते हैं
नई लीज़ वस्तुओं को तत्काल करने के विपरीत, एक नई धारक पहचान का उपयोग करके मौजूदा पट्टों का अधिग्रहण करेगा। आप चेक कर सकते हैं
क्यूब-एपिसेवर द्वारा उपयोग किया जाने वाला होस्टनाम `kubernetes.io/hostname` लेबल के मान की जाँच करके:

```shell
kubectl -n kube-system get lease kube-apiserver-c4vwjftbvpc5os2vvzle4qg27a -o yaml
```
```yaml
apiVersion: coordination.k8s.io/v1
kind: Lease
metadata:
  creationTimestamp: "2022-11-30T15:37:15Z"
  labels:
    k8s.io/component: kube-apiserver
    kubernetes.io/hostname: kind-control-plane
  name: kube-apiserver-c4vwjftbvpc5os2vvzle4qg27a
  namespace: kube-system
  resourceVersion: "18171"
  uid: d6c68901-4ec5-4385-b1ef-2d783738da6c
spec:
  holderIdentity: kube-apiserver-c4vwjftbvpc5os2vvzle4qg27a_9cbf54e5-1136-44bd-8f9a-1dcd15c346b4
  leaseDurationSeconds: 3600
  renewTime: "2022-11-30T18:04:27.912073Z"
```

क्यूब-एपिसर्वर के समाप्त हो चुके पट्टे जो अब मौजूद नहीं हैं, नए क्यूब-एपिसर्वर द्वारा 1 घंटे के बाद कचरा एकत्र किए जाते हैं।

आप `APIServerIdentity` को अक्षम करके API सर्वर पहचान पट्टे को अक्षम कर सकते हैं
[फीचर गेट](/docs/reference/command-line-tools-reference/feature-gates/)।

## वर्कलोड {#कस्टम-वर्कलोड}

आपका अपना कार्यभार पट्टों के अपने स्वयं के उपयोग को परिभाषित कर सकता है। उदाहरण के लिए, आप एक कस्टम चला सकते हैं
{{< glosary_tooltip term_id="controller" text="controller" >}} जहां एक प्राथमिक या नेता सदस्य
ऐसे ऑपरेशन करता है जो उसके साथी नहीं करते। आप एक पट्टे को परिभाषित करते हैं ताकि नियंत्रक प्रतिकृतियां चुन सकें
या समन्वय के लिए कुबेरनेट्स एपीआई का उपयोग करके एक नेता का चुनाव करें।
यदि आप पट्टे का उपयोग करते हैं, तो पट्टे के लिए एक नाम परिभाषित करना एक अच्छा अभ्यास है जो स्पष्ट रूप से जुड़ा हुआ है
उत्पाद या घटक। उदाहरण के लिए, यदि आपके पास उदाहरण फू नाम का एक घटक है, तो लीज़ नाम का उपयोग करें
`उदाहरण-फू`।

यदि एक क्लस्टर ऑपरेटर या अन्य अंतिम उपयोगकर्ता एक घटक के कई उदाहरणों को तैनात कर सकता है, तो एक नाम का चयन करें
नाम टकराव से बचने के लिए उपसर्ग और एक तंत्र चुनें (जैसे परिनियोजन के नाम का हैश)।
पट्टों के लिए।

जब तक यह एक ही परिणाम प्राप्त करता है तब तक आप किसी अन्य दृष्टिकोण का उपयोग कर सकते हैं: विभिन्न सॉफ़्टवेयर उत्पाद करते हैं
एक दूसरे के साथ संघर्ष नहीं।
