---
layout: blog
title: "ingress-nginx CVE-2025-1974 須知"
date: 2025-03-24T12:00:00-08:00
slug: ingress-nginx-CVE-2025-1974
author: >
  Tabitha Sable (Kubernetes 安全響應委員會)
translator: >
  [Michael Yao](https://github.com/windsonsea) (DaoCloud)
---
<!--
layout: blog
title: "Ingress-nginx CVE-2025-1974: What You Need to Know"
date: 2025-03-24T12:00:00-08:00
slug: ingress-nginx-CVE-2025-1974
author: >
  Tabitha Sable (Kubernetes Security Response Committee)
-->

<!--
Today, the ingress-nginx maintainers have [released patches for a batch of critical vulnerabilities](https://github.com/kubernetes/ingress-nginx/releases) that could make it easy for attackers to take over your Kubernetes cluster. If you are among the over 40% of Kubernetes administrators using [ingress-nginx](https://github.com/kubernetes/ingress-nginx/), you should take action immediately to protect your users and data.
-->
今天，ingress-nginx 項目的維護者們[發佈了一批關鍵漏洞的修復補丁](https://github.com/kubernetes/ingress-nginx/releases)，
這些漏洞可能讓攻擊者輕易接管你的 Kubernetes 集羣。目前有 40% 以上的 Kubernetes 管理員正在使用
[ingress-nginx](https://github.com/kubernetes/ingress-nginx/)，
如果你是其中之一，請立即採取行動，保護你的用戶和數據。

<!--
## Background

[Ingress](/docs/concepts/services-networking/ingress/) is the traditional Kubernetes feature for exposing your workload Pods to the world so that they can be useful. In an implementation-agnostic way, Kubernetes users can define how their applications should be made available on the network. Then, an [ingress controller](/docs/concepts/services-networking/ingress-controllers/) uses that definition to set up local or cloud resources as required for the user’s particular situation and needs.
-->
## 背景   {#background}

[Ingress](/zh-cn/docs/concepts/services-networking/ingress/)
是 Kubernetes 提供的一種傳統特性，可以將你的工作負載 Pod 暴露給外部世界，方便外部用戶使用。
Kubernetes 用戶可以用與實現無關的方式來定義應用如何在網絡上可用。
[Ingress 控制器](/zh-cn/docs/concepts/services-networking/ingress-controllers/)會根據定義，
配置所需的本地資源或雲端資源，以滿足用戶的特定場景和需求。

<!--
Many different ingress controllers are available, to suit users of different cloud providers or brands of load balancers. Ingress-nginx is a software-only ingress controller provided by the Kubernetes project. Because of its versatility and ease of use, ingress-nginx is quite popular: it is deployed in over 40% of Kubernetes clusters\!

Ingress-nginx translates the requirements from Ingress objects into configuration for nginx, a powerful open source webserver daemon. Then, nginx uses that configuration to accept and route requests to the various applications running within a Kubernetes cluster. Proper handling of these nginx configuration parameters is crucial, because ingress-nginx needs to allow users significant flexibility while preventing them from accidentally or intentionally tricking nginx into doing things it shouldn’t.
-->
爲了滿足不同雲廠商用戶或負載均衡器產品的需求，目前有許多不同類型的 Ingress 控制器。
ingress-nginx 是 Kubernetes 項目提供的純軟件的 Ingress 控制器。
ingress-nginx 由於靈活易用，非常受用戶歡迎。它已經被部署在超過 40% 的 Kubernetes 集羣中！

ingress-nginx 會將 Ingress 對象中的要求轉換爲 Nginx（一個強大的開源 Web 服務器守護進程）的配置。
Nginx 使用這些配置接受請求並將其路由到 Kubernetes 集羣中運行的不同應用。
正確處理這些 Nginx 配置參數至關重要，因爲 ingress-nginx 既要給予用戶足夠的靈活性，
又要防止用戶無意或有意誘使 Nginx 執行其不應執行的操作。

<!--
## Vulnerabilities Patched Today

Four of today’s ingress-nginx vulnerabilities are improvements to how ingress-nginx handles particular bits of nginx config. Without these fixes, a specially-crafted Ingress object can cause nginx to misbehave in various ways, including revealing the values of [Secrets](/docs/concepts/configuration/secret/) that are accessible to ingress-nginx. By default, ingress-nginx has access to all Secrets cluster-wide, so this can often lead to complete cluster takeover by any user or entity that has permission to create an Ingress.
-->
## 今日修復的漏洞    {#vulnerabilities-patched-today}

今天修復的四個 ingress-nginx 漏洞都是對 ingress-nginx 如何處理特定 Nginx 配置細節的改進。
如果不打這些修復補丁，一個精心構造的 Ingress 資源對象就可以讓 Nginx 出現異常行爲，
包括泄露 ingress-nginx 可訪問的 [Secret](/zh-cn/docs/concepts/configuration/secret/)
的值。默認情況下，ingress-nginx 可以訪問集羣範圍內的所有 Secret，因此這往往會導致任一有權限創建
Ingress 的用戶或實體接管整個集羣。

<!--
The most serious of today’s vulnerabilities, [CVE-2025-1974](https://github.com/kubernetes/kubernetes/issues/131009), rated [9.8 CVSS](https://www.first.org/cvss/calculator/3-1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H), allows anything on the Pod network to exploit configuration injection vulnerabilities via the Validating Admission Controller feature of ingress-nginx. This makes such vulnerabilities far more dangerous: ordinarily one would need to be able to create an Ingress object in the cluster, which is a fairly privileged action. When combined with today’s other vulnerabilities, **CVE-2025-1974 means that anything on the Pod network has a good chance of taking over your Kubernetes cluster, with no credentials or administrative access required**. In many common scenarios, the Pod network is accessible to all workloads in your cloud VPC, or even anyone connected to your corporate network\! This is a very serious situation.
-->
本次最嚴重的漏洞是 [CVE-2025-1974](https://github.com/kubernetes/kubernetes/issues/131009)，
CVSS 評分高達 [9.8](https://www.first.org/cvss/calculator/3-1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)，
它允許 Pod 網絡中的任意實體通過 ingress-nginx 的驗證性准入控制器特性濫用配置注入漏洞。
這種機制使得這些漏洞會產生更危險的情形：攻擊者通常需要能夠在集羣中創建 Ingress 對象（這是一種較高權限的操作）。
當結合使用今天修復的其他漏洞（比如 CVE-2025-1974），
**就意味着 Pod 網絡中的任何實體都有極大可能接管你的 Kubernetes 集羣，而不需要任何憑證或管理權限**。
在許多常見場景下，Pod 網絡可以訪問雲端 VPC 中的所有工作負載，甚至能訪問連接到你公司內網的任何人的機器！
這是一個非常嚴重的安全風險。

<!--
Today, we have [released ingress-nginx v1.12.1 and v1.11.5](https://github.com/kubernetes/ingress-nginx/releases), which have fixes for all five of these vulnerabilities.

## Your next steps

First, determine if your clusters are using ingress-nginx. In most cases, you can check this by running `kubectl get pods --all-namespaces --selector app.kubernetes.io/name=ingress-nginx` with cluster administrator permissions.
-->
我們今天已經[發佈了 ingress-nginx v1.12.1 和 v1.11.5](https://github.com/kubernetes/ingress-nginx/releases)，
這兩個版本修復了所有這 5 個漏洞。

## 你需要做什麼   {#your-next-steps}

首先，確定你的集羣是否在使用 ingress-nginx。大多數情況下，你可以使用集羣管理員權限運行以下命令進行檢查：

```shell
kubectl get pods --all-namespaces --selector app.kubernetes.io/name=ingress-nginx
```

<!--
**If you are using ingress-nginx, make a plan to remediate these vulnerabilities immediately.**

**The best and easiest remedy is to [upgrade to the new patch release of ingress-nginx](https://kubernetes.github.io/ingress-nginx/deploy/upgrade/).** All five of today’s vulnerabilities are fixed by installing today’s patches.

If you can’t upgrade right away, you can significantly reduce your risk by turning off the Validating Admission Controller feature of ingress-nginx.
-->
**如果你在使用 ingress-nginx，請立即針對這些漏洞制定補救計劃。**

**最簡單且推薦的補救方案是[立即升級到最新補丁版本](https://kubernetes.github.io/ingress-nginx/deploy/upgrade/)。**
安裝今天的補丁，就能修復所有這 5 個漏洞。

如果你暫時無法升級，可以通過關閉 ingress-nginx 的驗證性准入控制器特性來顯著降低風險。

<!--
* If you have installed ingress-nginx using Helm  
  * Reinstall, setting the Helm value `controller.admissionWebhooks.enabled=false`  
* If you have installed ingress-nginx manually  
  * delete the ValidatingWebhookconfiguration called `ingress-nginx-admission`  
  * edit the `ingress-nginx-controller` Deployment or Daemonset, removing `--validating-webhook` from the controller container’s argument list
-->
* 如果你使用 Helm 安裝了 ingress-nginx
  * 重新安裝，設置 Helm 參數 `controller.admissionWebhooks.enabled=false`
* 如果你是手動安裝的
  * 刪除名爲 `ingress-nginx-admission` 的 ValidatingWebhookConfiguration
  * 編輯 `ingress-nginx-controller` Deployment 或 DaemonSet，從控制器容器的參數列表中移除 `--validating-webhook`

<!--
If you turn off the Validating Admission Controller feature as a mitigation for CVE-2025-1974, remember to turn it back on after you upgrade. This feature provides important quality of life improvements for your users, warning them about incorrect Ingress configurations before they can take effect.
-->
如果你爲了緩解 CVE-2025-1974 造成的風險而關閉了驗證性准入控制器特性，
請在升級完成後記得重新開啓此特性。這個特性可以爲你的用戶提供重要的生命期幫助，
可以在錯誤的 Ingress 配置在生效之前及時提醒用戶。

<!--
## Conclusion, thanks, and further reading

The ingress-nginx vulnerabilities announced today, including CVE-2025-1974, present a serious risk to many Kubernetes users and their data. If you use ingress-nginx, you should take action immediately to keep yourself safe.

Thanks go out to Nir Ohfeld, Sagi Tzadik, Ronen Shustin, and Hillai Ben-Sasson from Wiz for responsibly disclosing these vulnerabilities, and for working with the Kubernetes SRC members and ingress-nginx maintainers (Marco Ebert and James Strong) to ensure we fixed them effectively.
-->
## 總結、致謝與更多參考   {#conclusion-thanks-and-further-reading}

今天公佈的包括 CVE-2025-1974 在內的 ingress-nginx 漏洞對許多 Kubernetes 用戶及其數據構成了嚴重風險。
如果你正在使用 ingress-nginx，請立即採取行動確保自身安全。

我們要感謝來自 Wiz 的 Nir Ohfeld、Sagi Tzadik、Ronen Shustin 和 Hillai Ben-Sasson，
他們負責任地披露了這些漏洞，並與 Kubernetes 安全響應委員會成員以及 ingress-nginx
維護者（Marco Ebert 和 James Strong）協同合作，確保這些漏洞被有效修復。

<!--
For further information about the maintenance and future of ingress-nginx, please see this [GitHub issue](https://github.com/kubernetes/ingress-nginx/issues/13002) and/or attend [James and Marco’s KubeCon/CloudNativeCon EU 2025 presentation](https://kccnceu2025.sched.com/event/1tcyc/).

For further information about the specific vulnerabilities discussed in this article, please see the appropriate GitHub issue: [CVE-2025-24513](https://github.com/kubernetes/kubernetes/issues/131005), [CVE-2025-24514](https://github.com/kubernetes/kubernetes/issues/131006), [CVE-2025-1097](https://github.com/kubernetes/kubernetes/issues/131007), [CVE-2025-1098](https://github.com/kubernetes/kubernetes/issues/131008), or [CVE-2025-1974](https://github.com/kubernetes/kubernetes/issues/131009)
-->
有關 ingress-nginx 的維護和未來的更多信息，
請參閱[這個 GitHub Issue](https://github.com/kubernetes/ingress-nginx/issues/13002)，
或參與 [James 和 Marco 在 KubeCon/CloudNativeCon EU 2025 的演講](https://kccnceu2025.sched.com/event/1tcyc/)。

關於本文中提到的具體漏洞的信息，請參閱以下 GitHub Issue：

- [CVE-2025-24513](https://github.com/kubernetes/kubernetes/issues/131005)
- [CVE-2025-24514](https://github.com/kubernetes/kubernetes/issues/131006)
- [CVE-2025-1097](https://github.com/kubernetes/kubernetes/issues/131007)
- [CVE-2025-1098](https://github.com/kubernetes/kubernetes/issues/131008)
- [CVE-2025-1974](https://github.com/kubernetes/kubernetes/issues/131009)
