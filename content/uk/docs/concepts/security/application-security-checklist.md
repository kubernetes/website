---
title: Список перевірки безпеки застосунків
description: >
  Базові рекомендації щодо забезпечення безпеки застосунків у Kubernetes, орієнтовані на розробників застосунків.
content_type: concept
weight: 110
---

<!-- overview -->

Цей список перевірки спрямований на надання основних рекомендацій з безпеки застосунків, що працюють у Kubernetes, з погляду розробника. Цей список не є вичерпним і має на меті з часом змінюватись.

<!-- Наступне взято з існуючого чекліста для адміністраторів Kubernetes. https://kubernetes.io/docs/concepts/security/security-checklist/ -->

Як читати та використовувати цей документ:

- Порядок тем не відображає пріоритетність.
- Деякі пункти списку детально описані в абзаці нижче списку кожного розділу.
- Цей список припускає, що `розробник` є користувачем кластера Kubernetes, який взаємодіє з обʼєктами в межах області імен.

{{< caution >}}
Списки **не є** достатніми для досягнення хорошого рівня безпеки самі по собі. Хороша безпека вимагає постійної уваги та вдосконалення, але список може бути першим кроком на нескінченному шляху до готовності до забезпечення безпеки. Деякі з рекомендацій у цьому списку можуть бути занадто обмежувальними або, навпаки, недостатніми для ваших конкретних потреб у безпеці. Оскільки безпека в Kubernetes не є універсальною, кожну категорію елементів списку слід оцінювати за її значенням.
{{< /caution >}}

<!-- body -->

## Базове посилення безпеки {#base-security-hardening}

Наведений нижче список містить рекомендації з базового посилення безпеки, які можуть застосовуватися до більшості застосунків, що розгортаються в Kubernetes.

### Дизайн застосунків {#application-design}

- [ ] Дотримання відповідних [принципів безпеки](https://www.cncf.io/wp-content/uploads/2022/06/CNCF_cloud-native-security-whitepaper-May2022-v2.pdf) при розробці застосунків.
- [ ] Застосунок налаштований з відповідним {{< glossary_tooltip text="класом QoS" term_id="QoS-class" >}} через запити ресурсів і обмеження.
- [ ] Встановлено обмеження памʼяті для робочих навантажень з обмеженням, яке дорівнює або менше запиту.
- [ ] Обмеження процесора може бути встановлено для чутливих робочих навантажень.

### Службові облікові записи {#service-account}

- [ ] Уникайте використання ServiceAccount `default`. Створюйте ServiceAccount для кожного робочого навантаження або мікросервісу.
- [ ] `automountServiceAccountToken` повинен бути встановлений у `false`, якщо Pod не потребує доступу до API Kubernetes для роботи.

### Рекомендації для `securityContext` на рівні Podʼа {#security-context-pod}

- [ ] Встановіть `runAsNonRoot: true`.
- [ ] Налаштуйте контейнер для виконання як менш привілейований користувач (наприклад, використовуючи `runAsUser` і `runAsGroup`), а також налаштуйте відповідні дозволи на файли або теки в образі контейнера.
- [ ] Додатково можна додати допоміжну групу з `fsGroup` для доступу до постійних томів.
- [ ] Застосунок розгортається в області імен, де застосовується відповідний [стандарт безпеки Podʼів](/docs/concepts/security/pod-security-standards/). Якщо ви не можете контролювати це примусове виконання для кластера(-ів), у якому розгортається застосунок, врахуйте це через документацію або додатковий захист у глибину.

### Рекомендації для `securityContext` на рівні контейнера {#security-context-container}

- [ ] Вимкніть підвищення привілеїв за допомогою `allowPrivilegeEscalation: false`.
- [ ] Налаштуйте кореневу файлову систему як тільки для читання з `readOnlyRootFilesystem: true`.
- [ ] Уникайте запуску привілейованих контейнерів (встановіть `privileged: false`).
- [ ] Вимкніть усі можливості у контейнерах і додайте лише конкретні, необхідні для роботи контейнера.

### Контроль доступу на основі ролей (RBAC) {#rbac}

- [ ] Дозволи, такі як **create**, **patch**, **update** і **delete**, слід надавати лише за потребою.
- [ ] Уникайте створення дозволів RBAC для створення або оновлення ролей, що може призвести до [підвищення привілеїв](/docs/reference/access-authn-authz/rbac/#privilege-escalation-prevention-and-bootstrapping).
- [ ] Перегляньте привʼязки для групи `system:unauthenticated` і видаліть їх, якщо можливо, оскільки це надає доступ будь-кому, хто може підʼєднатися до API-сервера на мережевому рівні.

Дії **create**, **update** і **delete** слід дозволяти обачно. Дія **patch**, якщо дозволена для області імен, може
[дозволити користувачам оновлювати мітки у namespace чи deployment](/docs/concepts/security/rbac-good-practices/#namespace-modification), що може збільшити поверхню атаки.

Для чутливих робочих навантажень розгляньте можливість надання рекомендованої ValidatingAdmissionPolicy, яка додатково обмежує дозволені дії запису.

### Безпека образів {#image-security}

- [ ] Використовуйте інструменту для сканування образів перед розгортанням контейнерів у кластері Kubernetes.
- [ ] Використовуйте підписування контейнерів для перевірки підпису образу контейнера перед розгортанням у кластері Kubernetes.

### Мережеві політики {#network-policies}

- [ ] Налаштуйте [NetworkPolicies](/docs/concepts/services-networking/network-policies/), щоб дозволити лише очікуваний вхідний та вихідний трафік з Podʼів.

Переконайтеся, що ваш кластер надає та вимагає виконання NetworkPolicy. Якщо ви пишете застосунок, який користувачі будуть розгортати в різних кластерах, розгляньте, чи можете ви припустити, що NetworkPolicy доступний і виконується.

## Розширене посилення безпеки {#advanced}

Цей розділ цього посібника охоплює деякі розширені моменти посилення безпеки, які можуть бути корисні залежно від налаштувань середовища Kubernetes.

### Безпека контейнерів Linux {#linux-container-security}

Налаштуйте {{< glossary_tooltip text="Security Context" term_id="Security-Context" >}} для pod-container.

- [ ] [Встановіть профілі Seccomp для контейнерів](/docs/tasks/configure-pod-container/security-context/#set-the-seccomp-profile-for-a-container).
- [ ] [Обмежте доступ контейнера до ресурсів за допомогою AppArmor](/docs/tutorials/security/apparmor/).
- [ ] [Призначте відповідні мітки SELinux контейнерам](/docs/tasks/configure-pod-container/security-context/#assign-selinux-labels-to-a-container).

### Класи виконання {#runtime-classes}

- [ ] Налаштуйте відповідні класи виконання для контейнерів.

{{% thirdparty-content %}}

Деяким контейнерам може знадобитися інший рівень ізоляції, ніж стандартно впроваджений у кластері. `runtimeClassname` можна використовувати у podspec для визначення іншого класу виконання.

Для чутливих робочих навантажень розгляньте використання інструментів емуляції ядра, таких як [gVisor](https://gvisor.dev/docs/), або віртуалізованої ізоляції за допомогою механізму, такого як [kata-containers](https://katacontainers.io/).

У високонадійних середовищах розгляньте використання [конфіденційних віртуальних машин](/blog/2023/07/06/confidential-kubernetes/) для подальшого підвищення безпеки чутливих робочих навантажень.
