---
title: "Service, балансування навантаження та мережа"
weight: 60
description: >
  Концепції та ресурси, що лежать в основі роботи в мережі в Kubernetes.
---

## Мережева модель Kubernetes {#the-kubernetes-network-model}

Мережева модель Kubernetes складається з кількох частин:

* Кожен [pod](/docs/concepts/workloads/pods/) у кластері отримує
  власну унікальну кластерну IP-адресу.

  * Pod має власний приватний мережевий простір імен, який спільно використовують всі контейнери всередині podʼа. Процеси, що працюють у різних контейнерах в одному podʼі, можуть спілкуватися між собою через `localhost`.

* _Мережа pod'а_ (також називається кластерною мережею) керує комунікацією між podʼами. Вона забезпечує, що (за відсутності навмисної сегментації мережі):

  * Усі podʼи можуть спілкуватися з усіма іншими podʼами, незалежно від того, чи знаходяться вони на одному [вузлі](/docs/concepts/architecture/nodes/), чи на різних. Podʼи можуть спілкуватися безпосередньо, без використання проксі-серверів чи трансляції адрес (NAT).

    У Windows це правило не застосовується до podʼів з мережею вузла.

  * Агенти на вузлі (такі як системні демони чи kubelet) можуть спілкуватися з усіма podʼами на цьому вузлі.

* API [Service](/docs/concepts/services-networking/service/) дозволяє надати стабільну (довготривалу) IP-адресу або імʼя хосту для сервісу, реалізованого одним або кількома podʼами, при цьому окремі podʼи, що складають сервіс, можуть змінюватися з часом.

  * Kubernetes автоматично керує обʼєктами [EndpointSlice](/docs/concepts/services-networking/endpoint-slices/), які надають інформацію про podʼи, що підтримують сервіс.

  * Реалізація проксі сервісу відстежує набір обʼєктів Service та EndpointSlice і програмує панель даних для маршрутизації трафіку сервісу до його бекендів, використовуючи API операційної системи або хмарних провайдерів для перехоплення або переписування пакетів.

* API [Gateway](/docs/concepts/services-networking/gateway/) (або його попередник [Ingress](/docs/concepts/services-networking/ingress/)) дозволяє зробити сервіси доступними для клієнтів поза кластером.

  * Простішим, але менш гнучким механізмом кластерного ingress є використання API Service з типом [`type: LoadBalancer`](/docs/concepts/services-networking/service/#loadbalancer), якщо підтримується відповідним {{< glossary_tooltip term_id="cloud-provider" text="постачальником хмарних послуг" >}}.

* [NetworkPolicy](/docs/concepts/services-networking/network-policies) — це вбудований API Kubernetes, який дозволяє контролювати трафік між podʼами або між podʼами та зовнішнім світом.

У старіших контейнерних системах не було автоматичної зʼєднуваності між контейнерами на різних вузлах, тому часто було необхідно явно створювати посилання між контейнерами або призначати порти контейнерів на порти хосту, щоб зробити їх доступними для інших контейнерів. Це не потрібно в Kubernetes, оскільки модель Kubernetes передбачає, що podʼи можна розглядати подібно до віртуальних машин або фізичних хостів з погляду виділення портів, іменування, виявлення сервісів, балансування навантаження, налаштування застосунків та міграції.

Тільки кілька частин цієї моделі реалізовані безпосередньо Kubernetes. Для решти Kubernetes визначає API, але відповідна функціональність надається зовнішніми компонентами, деякі з яких є опціональними:

* Налаштування простору імен мережі pod виконується системним програмним забезпеченням, яке реалізує [Container Runtime Interface](/docs/concepts/containers/cri/).

* Мережею pod керує [реалізація мережі pod](/docs/concepts/cluster-administration/addons/#networking-and-network-policy). На Linux більшість середовищ виконання контейнерів використовують {{< glossary_tooltip text="Container Networking Interface (CNI)" term_id="cni" >}}, щоб взаємодіяти з реалізацією мережі pod, тому ці реалізації часто називаються _CNI втулками_.

* Kubernetes надає стандартну реалізацію проксіювання сервісів, яка називається {{< glossary_tooltip term_id="kube-proxy" >}}, але деякі реалізації мережі pod використовують власний сервісний проксі, який тісніше інтегрований з іншими компонентами.

* NetworkPolicy зазвичай також реалізується мережею pod. (Деякі простіші реалізації мережі pod не підтримують NetworkPolicy, або адміністратор може вирішити налаштувати мережу pod без підтримки NetworkPolicy. У таких випадках API буде присутній, але не матиме жодного ефекту.)

* Існує багато [реалізацій Gateway API](https://gateway-api.sigs.k8s.io/implementations/), деякі з яких специфічні для певних хмарних середовищ, інші більше орієнтовані на середовища "bare metal", а інші є більш універсальними.

## {{% heading "whatsnext" %}}

[Підключення застосунків за допомогою Service](/docs/tutorials/services/connect-applications-service/) — це навчальний посібник, який дозволяє дізнатися більше про сервіси та мережу Kubernetes на практичному прикладі.

Стаття [Мережа кластера](/docs/concepts/cluster-administration/networking/) пояснює, як налаштувати мережу для вашого кластера, а також надає огляд задіяних технологій.
