---
title: Правила використання kubectl
content_type: concept
weight: 60
---

<!-- overview -->
Рекомендовані правила використання `kubectl`.

<!-- body -->

## Використання `kubectl` у багаторазових скриптах {#using-kubectl-in-reusable-scripts}

Для стабільного виводу у скрипті:

* Використовуйте одну з машинно-орієнтованих форм виводу, таких як `-o name`, `-o json`, `-o yaml`, `-o go-template`, або `-o jsonpath`.
* Повністю вказуйте версію. Наприклад, `jobs.v1.batch/myjob`. Це гарантує, що kubectl не використовуватиме свою стандартну версію, яка може змінюватися з часом.
* Не покладайтеся на контекст, налаштування або інші неявні стани.

## Субресурси {#subresources}

* Ви можете використовувати аргумент `--subresource` для команд kubectl, таких як `get`, `patch`, `edit`, `apply` та `replace` для отримання та оновлення субресурсів для всіх ресурсів, які їх підтримують. В Kubernetes версії {{< skew currentVersion >}} підтримуються лише субресурси `status`, `scale` та `resize`.
  * Для `kubectl edit`, субресурс `scale` не підтримується. Якщо ви використовуєте `--subresource` з `kubectl edit` і вказуєте `scale` як субресурс, команда викличе помилку.
* Контракт API для субресурсу ідентичний до повного ресурсу. Оновлюючи субресурс `status` до нового значення, майте на увазі, що субресурс може бути потенційно узгоджений контролером до іншого значення.

## Рекомендації {#best-practices}

### `kubectl run`

Для того, щоб `kubectl run` відповідав принципу інфраструктури як код:

* Присвойте образу версію зі специфічним теґом і не переносіть цей теґ на нову версію. Наприклад, використовуйте `:v1234`, `v1.2.3`, `r03062016-1-4`, а не `:latest` (Для отримання додаткової інформації дивіться [Поради щодо конфігурації](/docs/concepts/configuration/overview/#container-images)).
* Перевірте в скрипті наявність образу з великою кількістю параметрів.
* Перейдіть до файлів конфігурації, перевірених у контролі вихідного коду, для отримання можливостей, які є необхідними, але не можуть бути виражені за допомогою прапорців `kubectl run`.

Ви можете використовувати прапорець `--dry-run=client`, щоб переглянути обʼєкт, який буде відправлений до вашого кластера, без реального його надсилання.

### `kubectl apply`

* Ви можете використовувати `kubectl apply` для створення або оновлення ресурсів. Для отримання додаткової інформації про використання kubectl apply для оновлення ресурсів, дивіться [Kubectl Book](https://kubectl.docs.kubernetes.io).
