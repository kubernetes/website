---
content_type: concept
title: Інструменти для моніторингу ресурсів
weight: 17
---

<!-- overview -->

Щоб масштабувати застосунок і надавати надійні послуги, вам потрібно розуміти, як застосунок працює при його розгортанні. Ви можете аналізувати продуктивність застосунку в кластері Kubernetes, перевіряючи контейнери, [Podʼи](/docs/concepts/workloads/pods/), [Serviceʼи](/docs/concepts/services-networking/service/) та загальні характеристики кластера. Kubernetes надає докладну інформацію про використання ресурсів застосункам на кожному з цих рівнів. Ця інформація дозволяє оцінити продуктивність вашого застосунку та визначити місця, де можна видалити перешкоди, щоб покращити загальну продуктивність.

<!-- body -->

У Kubernetes моніторинг застосунків не залежить від єдиного рішення для моніторингу. На нових кластерах ви можете використовувати конвеєри [метрик ресурсів](#resource-metrics-pipeline) або [повні метрики](#full-metrics-pipeline), щоб збирати статистику для моніторингу.

## Конвеєр метрик ресурсів {#resource-metrics-pipeline}

Конвеєр метрик ресурсів надає обмежений набір метрик, повʼязаних з компонентами кластера, такими як контролер [Горизонтального автомасштабування Podʼів](/docs/tasks/run-application/horizontal-pod-autoscale/) та утилітою `kubectl top`. Ці метрики збираються легким, тимчасовим, розташованим в памʼяті [metrics-server](https://github.com/kubernetes-sigs/metrics-server) та експонується через API `metrics.k8s.io`.

Metrics-server виявляє всі вузли в кластері та запитує [kubelet](/docs/reference/command-line-tools-reference/kubelet/) кожного вузла для визначення використання центрального процесора та памʼяті. Kubelet виступає як міст між майстром Kubernetes та вузлами, керуючи Podʼами та контейнерами, що працюють на машині. Kubelet перетворює кожний Pod у його складові контейнери та отримує статистику використання кожного контейнера через інтерфейс середовища виконання контейнерів. Якщо ви використовуєте середовище виконання контейнерів, яке використовує Linux cgroups та простори імен для роботи контейнерів, і середовище виконання контейнерів не публікує статистику використання, тоді kubelet може отримувати ці статистичні дані безпосередньо (використовуючи код з [cAdvisor](https://github.com/google/cadvisor)). Незалежно від того, як надходять ці статистичні дані, kubelet після цього використовує агреговану статистику використання ресурсів Podʼів через metrics-server Resource Metrics API. Цей API надається за адресою `/metrics/resource/v1beta1` на автентифікованих та портах kublet, доступних тільки для читання.

## Конвеєр повних метрик {#full-metrics-pipeline}

Конвеєр повних метрик дає вам доступ до більш розширених метрик. Kubernetes може відповідати на ці метрики, автоматично масштабуючи або адаптуючи кластер на основі його поточного стану за допомогою механізмів, таких як Горизонтальне автомасштабування Podʼів. Конвеєр моніторингу витягує метрики з kubelet та експонує їх в Kubernetes через адаптер, реалізуючи API `custom.metrics.k8s.io` або `external.metrics.k8s.io`.

Kubernetes розроблено для роботи з [OpenMetrics](https://openmetrics.io/), який є одним із [проєктів моніторингу CNCF](https://landscape.cncf.io/?group=projects-and-products&view-mode=card#observability-and-analysis--monitoring), побудованим на основі [формату експонування метрик Prometheus](https://prometheus.io/docs/instrumenting/exposition_formats/) та розширюючи його майже у 100% сумісний спосіб.

Якщо ви переглянете [CNCF Landscape](https://landscape.cncf.io/?group=projects-and-products&view-mode=card#observability-and-analysis--monitoring), ви побачите ряд проєктів моніторингу, які можуть працювати з Kubernetes, витягуючи дані метрик та використовуючи їх, щоб допомоги вам спостерігати за вашим кластером. Вам слід вибрати інструмент або інструменти, які відповідають вашим потребам. Ландшафт CNCF для спостереження та аналізу включає комбінацію вільного програмного забезпечення, платного програмного забезпечення-як-сервісу та інших комерційних продуктів.

При проєктуванні та реалізації конвеєра повних метрик ви можете зробити ці моніторингові дані доступні зворотньо у Kubernetes. Наприклад, HorizontalPodAutoscaler може використовувати оброблені метрики для розрахунку кількості Podʼів, які потрібно запустити як складову вашого навантаження.

Інтеграція конвеєра повних у вашу реалізацію Kubernetes знаходиться поза межами документації Kubernetes через дуже широкий спектр можливих рішень.

Вибір моніторингової платформи значно залежить від ваших потреб, бюджету та технічних ресурсів. Kubernetes не надає жодних переваг щодо конкретних конвеєрів метрик; [існує багато варіантів](https://landscape.cncf.io/?group=projects-and-products&view-mode=card#observability-and-analysis--monitoring). Ваша система моніторингу повинна бути здатна обробляти стандарт передачі метрик [OpenMetrics](https://openmetrics.io/) і має бути обрана так, щоб найкраще вписуватися в вашу загальну концепцію та розгортання інфраструктури.

## {{% heading "whatsnext" %}}

Дізнайтеся про додаткові інструменти для налагодження, включаючи:

* [Логування](/docs/concepts/cluster-administration/logging/)
* [Вхід у контейнери через `exec`](/docs/tasks/debug/debug-application/get-shell-running-container/)
* [Підключення до контейнерів через проксі](/docs/tasks/extend-kubernetes/http-proxy-access-api/)
* [Підключення до контейнерів через перенаправлення портів](/docs/tasks/access-application-cluster/port-forward-access-application-cluster/)
* [Огляд вузла Kubernetes за допомогою crictl](/docs/tasks/debug/debug-cluster/crictl/)
